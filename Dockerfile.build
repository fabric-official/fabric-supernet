FROM ubuntu:22.04
RUN apt-get update && apt-get install -y cmake ninja-build clang g++ make python3 python3-pip git && rm -rf /var/lib/apt/lists/*
WORKDIR /work
COPY . /work
RUN cmake -S . -B build -G Ninja -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ && cmake --build build --parallel
CMD ["bash", "-lc", "ctest --test-dir build || true"]
